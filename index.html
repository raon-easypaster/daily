<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ë¼ì˜¨ë™í–‰êµíšŒ ê°€ì •ì˜ˆë°° ì•„ì¹´ì´ë¸Œ</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Gowun+Batang:wght@400;700&display=swap" rel="stylesheet">

<style>
:root{
  --primary:#6A1B9A;
  --accent:#AB47BC;
  --bg:#F3E5F5;
  --card:#fff;
  --text:#333;
  --sub:#666;
  --shadow:0 4px 20px rgba(106,27,154,.1);
  --radius:16px;
  --new:#FF7043;
}
*{box-sizing:border-box;margin:0;padding:0}
body{
  font-family:'Gowun Batang',serif;
  background:var(--bg);
  color:var(--text);
}
.container{
  max-width:1200px;
  margin:auto;
  padding:40px 20px;
}
header{
  text-align:center;
  margin-bottom:40px;
}
.church{
  color:var(--accent);
  font-weight:700;
}
h1{
  font-size:2.5rem;
  color:var(--primary);
}
.sub{
  color:var(--sub);
}
.search{
  max-width:600px;
  margin:0 auto 50px;
}
.search input{
  width:100%;
  padding:16px 24px;
  font-size:1.1rem;
  border-radius:999px;
  border:none;
  box-shadow:var(--shadow);
}
.grid{
  display:grid;
  gap:24px;
  grid-template-columns:repeat(auto-fill,minmax(280px,1fr));
}
.card{
  background:var(--card);
  border-radius:var(--radius);
  padding:24px;
  box-shadow:var(--shadow);
  text-decoration:none;
  color:inherit;
  position:relative;
  transition:.25s;
}
.card:hover{transform:translateY(-5px)}
.card::before{
  content:'';
  position:absolute;
  top:0;left:0;
  width:100%;height:4px;
  background:linear-gradient(to right,#E1BEE7,#BA68C8);
}
.card-date{
  font-size:.9rem;
  color:var(--sub);
  display:flex;
  gap:6px;
  align-items:center;
  flex-wrap:wrap;
}
.card-date::before{content:'ğŸ“…'}
.badge{
  padding:2px 8px;
  border-radius:10px;
  font-size:.7rem;
  font-weight:700;
  color:#fff;
}
.badge.new{background:var(--new)}
.badge.today{background:#E53935}
.badge.sun{background:#1E88E5}
.scripture{
  margin:10px 0;
  color:var(--accent);
  font-weight:700;
  background:#F3E5F5;
  padding:4px 12px;
  border-radius:20px;
  display:inline-block;
}
.title{
  font-size:1.25rem;
  font-weight:700;
}
.card.today{
  border:2px solid #E53935;
  background:#FFF5F5;
  box-shadow:0 12px 30px rgba(229,57,53,.25);
}
.no{
  display:none;
  text-align:center;
  padding:60px;
  color:var(--sub);
}
</style>
</head>

<body>
<div class="container">
<header>
  <p class="church">ê¸°ë…êµ ëŒ€í•œì„±ê²°êµíšŒ ë¼ì˜¨ë™í–‰êµíšŒ</p>
  <h1>ê°€ì •ì˜ˆë°° ì•„ì¹´ì´ë¸Œ</h1>
  <p class="sub">ë§ì”€ê³¼ ë™í–‰í•˜ëŠ” ë§¤ì¼ì˜ ì€í˜œ</p>
</header>

<div class="search">
  <input id="q" placeholder="ë‚ ì§œ, ë³¸ë¬¸, ì£¼ì œë¥¼ ê²€ìƒ‰í•˜ì„¸ìš”">
</div>

<main>
  <div id="list" class="grid"></div>
  <div id="no" class="no">ğŸƒ ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤</div>
</main>
</div>

<!-- âœ… 1. ìë™ ìƒì„±ëœ ë°ì´í„° (GitHub Actions) -->
<script src="data/bibleData.js"></script>

<!-- âœ… 2. ëª¨ë“  ë¡œì§ì€ ì´ script í•˜ë‚˜ -->
<script>
/* ===== ì„¤ì • ===== */
const NEW_DAYS = 3;
const WEEK = ['ì¼','ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† '];

/* ===== DOM ===== */
const list = document.getElementById('list');
const q = document.getElementById('q');
const no = document.getElementById('no');

/* ===== ìœ í‹¸ ===== */
const today = new Date();
const isNew = d => (today - new Date(d))/(1000*60*60*24) <= NEW_DAYS;
const isSunday = d => new Date(d).getDay() === 0;
const isToday = d => new Date(d).toDateString() === today.toDateString();
const fmt = d => {
  const x=new Date(d);
  return `${x.getFullYear()}.${String(x.getMonth()+1).padStart(2,'0')}.${String(x.getDate()).padStart(2,'0')}(${WEEK[x.getDay()]})`;
};

/* ===== ë Œë” ===== */
function render(){
  const query = q.value.replace(/\s/g,'').toLowerCase();
  const rows = BIBLE_DATA
    .filter(r => `${r.date}${r.scripture}${r.title}`.replace(/\s/g,'').toLowerCase().includes(query))
    .sort((a,b)=>new Date(b.date)-new Date(a.date));

  list.innerHTML='';
  if(!rows.length){ no.style.display='block'; return; }
  no.style.display='none';

  rows.forEach(r=>{
    const a=document.createElement('a');
    a.className='card'+(isToday(r.date)?' today':'');
    a.href=r.link;
    a.innerHTML=`
      <div class="card-date">
        ${fmt(r.date)}
        ${isToday(r.date)?'<span class="badge today">TODAY</span>':''}
        ${isSunday(r.date)?'<span class="badge sun">ì£¼ì¼</span>':''}
        ${isNew(r.date)?'<span class="badge new">NEW</span>':''}
      </div>
      <div class="scripture">${r.scripture}</div>
      <div class="title">${r.title}</div>
    `;
    list.appendChild(a);
  });
}

q.addEventListener('input', render);
render();
</script>

</body>
</html>
